/*! Modals v8.1.0 | (c) 2015 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/modals */
!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.modals=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t,o={},n="querySelector"in document&&"addEventListener"in e&&"classList"in document.createElement("_"),l="closed",a={selectorToggle:"[data-modal]",selectorWindow:"[data-modal-window]",selectorClose:"[data-modal-close]",modalActiveClass:"active",modalBGClass:"modal-bg",backspaceClose:!0,callbackOpen:function(){},callbackClose:function(){}},c=function(e,t,o){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(o,e[n],n,e);else for(var l=0,a=e.length;a>l;l++)t.call(o,e[l],l,e)},r=function(){var e={},t=!1,o=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],o++);for(var l=function(o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t&&"[object Object]"===Object.prototype.toString.call(o[n])?e[n]=r(!0,e[n],o[n]):e[n]=o[n])};n>o;o++){var a=arguments[o];l(a)}return e},s=function(e,t){var o,n,l=t.charAt(0);for("["===l&&(t=t.substr(1,t.length-2),o=t.split("="),o.length>1&&(n=!0,o[1]=o[1].replace(/"/g,"").replace(/'/g,"")));e&&e!==document;e=e.parentNode){if("."===l&&e.classList.contains(t.substr(1)))return e;if("#"===l&&e.id===t.substr(1))return e;if("["===l&&e.hasAttribute(o[0])){if(!n)return e;if(e.getAttribute(o[0])===o[1])return e}if(e.tagName.toLowerCase()===t)return e}return null},i=function(e,t){if(!e.classList.contains(t)){var o=e.querySelector("iframe"),n=e.querySelector("video");if(o){var l=o.src;o.src=l}n&&n.pause()}};o.openModal=function(e,t,o){var n=r(n||a,o||{}),c=document.querySelector(t),s=document.createElement("div");s.setAttribute("data-modal-bg",null),s.classList.add(n.modalBGClass),c.classList.add(n.modalActiveClass),document.body.appendChild(s),l="open",n.callbackOpen(e,t)},o.closeModals=function(e,t){var o=r(a,t||{}),n=document.querySelectorAll(o.selectorWindow+"."+o.modalActiveClass),s=document.querySelectorAll("[data-modal-bg]");(n.length>0||s.length>0)&&(c(n,function(e){e.classList.contains(o.modalActiveClass)&&(i(e),e.classList.remove(o.modalActiveClass))}),c(s,function(e){document.body.removeChild(e)}),l="closed",o.callbackClose())};var d=function(e){var n=e.target,a=s(n,t.selectorToggle),c=s(n,t.selectorClose),r=s(n,t.selectorWindow),i=e.keyCode;if(i&&"open"===l)(27===i||t.backspaceClose&&(8===i||46===i))&&o.closeModals(null,t);else if(n){if(r&&!c)return;a?(e.preventDefault(),o.openModal(a,a.getAttribute("data-modal"),t)):"open"===l&&(e.preventDefault(),o.closeModals(n,t))}};return o.destroy=function(){t&&(document.removeEventListener("click",d,!1),document.removeEventListener("touchstart",d,!1),document.removeEventListener("keydown",d,!1),t=null)},o.init=function(e){n&&(o.destroy(),t=r(a,e||{}),document.addEventListener("click",d,!1),document.addEventListener("touchstart",d,!1),document.addEventListener("keydown",d,!1))},o});